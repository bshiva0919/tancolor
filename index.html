<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>tancolor.js interactive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Loading Bootstrap -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Loading Flat UI -->
    <link href="css/flat-ui.css" rel="stylesheet">

    <link href="css/demo.css" rel="stylesheet">

    <link rel="shortcut icon" href="images/favicon.png">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="demo-headline">
        <h1 class="demo-logo">
            tancolor.js
          <small>A jQuery plugin that processes image.</small>
        </h1>
        <div class="login">
        <div class="login-screen">
          <div class="login-icon">
            <img id="myImage" src="images/obama.jpg" alt="I am Obama">
          </div>

          <div class="login-form">
          
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="rweight">r_weight</label>
                </div>
                <div class="col-xs-3">
                  <input id="r_weight_text" type="text" class="form-control" value="0.34">
                </div>
                <input type="range" name="points" min="1" max="1000" id="r_weight" value="340">
              </div>
            </div>
            
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="gweight">g_weight</label>
                </div>
                <div class="col-xs-3">
                  <input id="g_weight_text" type="text" class="form-control" value="0.5">
                </div>
                <input type="range" name="points" min="1" max="1000" id="g_weight" value="500">
              </div>
            </div>
            
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="bweight">b_weight</label>
                </div>
                <div class="col-xs-3">
                  <input id="b_weight_text" type="text" class="form-control" value="0.16">
                </div>
                <input type="range" name="points" min="1" max="1000" id="b_weight" value="160">
              </div>
            </div>
            
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="rintensity">r_intensity</label>
                </div>
                <div class="col-xs-3">
                  <input id="r_intensity_text" type="text" class="form-control" value="1">
                </div>
                <input type="range" name="points" min="1" max="1000" id="r_intensity" value="4">
              </div>
            </div>
            
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="g_intensity">g_intensity</label>
                </div>
                <div class="col-xs-3">
                  <input id="g_intensity_text" type="text" class="form-control" value="1">
                </div>
                <input type="range" name="points" min="1" max="1000" id="g_intensity" value="4">
              </div>
            </div>
            
            <div class="row">
              <div class="control-group pull-left">
                <div class="col-xs-3">
                  <label for="bintensity">b_intensity</label>
                </div>
                <div class="col-xs-3">
                  <input id="b_intensity_text" type="text" class="form-control" value="1">
                </div>
                <input type="range" name="points" min="1" max="1000" id="b_intensity" value="4">
              </div>
            </div>

            

          </div>
        </div>
      </div>
      </div> <!-- /demo-headline -->
    </div>
    <!-- /.container -->


    <!-- Load JS here for greater good =============================-->
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="js/jquery.ui.touch-punch.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-select.js"></script>
    <script src="js/bootstrap-switch.js"></script>
    <script src="js/flatui-checkbox.js"></script>
    <script src="js/flatui-radio.js"></script>
    <script src="js/jquery.tagsinput.js"></script>
    <script src="js/jquery.placeholder.js"></script>
    <script src="js/jquery.tancolor.js"></script>
    <script>
    $('input[type=range]').change(function () {
        var value = this.value;
        var id = this.id;
        var input_text = "#" + this.id + "_text";
        console.log(input_text);
        var res = id.split("_");
        console.log(res)
        if (res[1] == "intensity"){
            value = (value * 255) / 1000;
            value = Math.round(value);
        } else if (res[1] == "weight") {
            value = value / 1000; 
        }
        $(input_text).val(value);
        
        //update filter
        update_filter();
    });
    
    $('input[type=text]').change(function () {
        var value = this.value;
        var id = this.id;
        var res = id.split("_");
        console.log(res);
        var input_slider = "#" + res[0] + "_" + res[1];
        if (res[1] == "weight") {
            if (value > 1) {
                value = 1;
                $(this).val(1);
            } else if (value < 0) {
                value = 0;
                $(this).val(0);
            }
            value = value * 1000;
        } else if (res[1] == "intensity") {
            if (value > 255) {
                value = 255;
                $(this).val(255);
            } else if (value < 1) {
                value = 1;
                $(this).val(1);
            }
            value = (value * 1000)/255;
        }
        $(input_slider).val(value);
        
        // update filter
        update_filter();
    });

    function update_filter() {
        console.log(parseFloat($("#r_weight_text").val()));
        console.log(parseFloat($("#g_weight_text").val()));
        console.log(parseFloat($("#b_weight_text").val()));
        console.log(parseInt($("#r_intensity_text").val()));
        console.log(parseInt($("#g_intensity_text").val()));
        console.log(parseInt($("#b_intensity_text").val()));

        $("#myImage").tancolor({
            r_weight: parseFloat($("#r_weight_text").val()),
            g_weight: parseFloat($("#g_weight_text").val()),
            b_weight: parseFloat($("#b_weight_text").val()),
            r_intensity: parseInt($("#r_intensity_text").val()),
            g_intensity: parseInt($("#g_intensity_text").val()),
            b_intensity: parseInt($("#b_intensity_text").val())
        });
    }
    $(document).ready(function(){  
        $("#myImage").tancolor({}); 
    });  
    </script>
  </body>
</html>
